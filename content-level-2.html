<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Health enSuite Patient Level 2 Program Content</title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
    <!-- Pignose Calender -->
    <link href="./plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.css" rel="stylesheet">
    <!-- Page plugins css -->
    <link href="./plugins/clockpicker/dist/jquery-clockpicker.min.css" rel="stylesheet">
    <!-- Color picker plugins css -->
    <link href="./plugins/jquery-asColorPicker-master/css/asColorPicker.css" rel="stylesheet">
    <!-- Date picker plugins css -->
    <link href="./plugins/bootstrap-datepicker/bootstrap-datepicker.min.css" rel="stylesheet">
    <!-- Daterange picker plugins css -->
    <link href="./plugins/timepicker/bootstrap-timepicker.min.css" rel="stylesheet">
    <link href="./plugins/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">
    <!-- Custom Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <link href="./plugins/sweetalert/css/sweetalert.css" rel="stylesheet">

    <script language="javascript">

        window.onload = function getPatientsPastSleepClock(){
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();
            var endDate = yyyy + '-' + mm + '-' + dd;
            var days = 7; // Days you want to subtract
            var last = new Date(today.getTime() - (days * 24 * 60 * 60 * 1000));
            var day = String(last.getDate()).padStart(2, '0');
            var month = String(last.getMonth() + 1).padStart(2, '0');
            var year = last.getFullYear();
            var startDate = year + '-' + month + '-' + day;

                let url = 'http://health.us-east-2.elasticbeanstalk.com/insomnia/v1/intervention/getleveltwovariables';
                let authToken = window.localStorage.getItem("patientToken");
                
                //alert(endDate);
                $.ajax({
                    url: url,
                    type: 'POST',
                    headers: {
                        'Content-Type': 'application/json', 
                        'Accept': '*/*',
                        'Authorization': 'Bearer '+ authToken
                    },
                    data: JSON.stringify({
                        "startDate" : startDate,
                        "endDate" : endDate
                        }),
                    success: function(result){
                        console.log(result);
                        
                        // document.getElementById('yBedTime').innerHTML  = result.averagebedtiime;
                        // document.getElementById('yRiseTime').innerHTML  = result.averagerisetime;
                        // document.getElementById('avTimePerNight').innerHTML  = result.averagetimeinbed;
                        // document.getElementById('avTotalTimePerNight').innerHTML  = result.averagetotalsleeptime;
                        // document.getElementById('avSleepEff').innerHTML  = result.averagesleepefficiency;
                        // document.getElementById('nextHour').innerHTML  = result.averagenumberofsleephours;
                        // window.localStorage.setItem("yBedTime", result.averagebedtiime);
                        // window.localStorage.setItem("yRiseTime", result.averagerisetime);
                    }, 
                    error: function(msg){
                        console.log("Loading Patients Last Sleep Clock failed");
                    }
                });
            }

        window.onload =  function() {
            $('#exampleModalLevel2').modal('show');
        }
    </script>

</script>

</head>

<body>

    <!--*******************
        Preloader start
    ********************-->
    <div id="preloader">
        <div class="loader">
            <svg class="circular" viewBox="25 25 50 50">
                <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="3" stroke-miterlimit="10" />
            </svg>
        </div>
    </div>
    <!--*******************
        Preloader end
    ********************-->

    
    <!--**********************************
        Main wrapper start
    ***********************************-->
    <div id="main-wrapper">

        <!--**********************************
            Nav header start
        ***********************************-->
        <div class="nav-header">
            <div class="brand-logo">
                <a href="index.html">
                    <b class="logo-abbr"><img src="images/logo.png" alt=""> </b>
                    <span class="logo-compact"><img src="./images/logo-compact.png" alt=""></span>
                    <span class="brand-title">
                        <img src="images/logo-text.png" alt="">
                    </span>
                </a>
            </div>
        </div>
        <!--**********************************
            Nav header end
        ***********************************-->

        <!--**********************************
            Header start
        ***********************************-->
        <div class="header">    
            <div class="header-content clearfix">
                
                <!-- <div class="nav-control">
                    <div class="hamburger">
                        <span class="toggle-icon"><i class="icon-menu"></i></span>
                    </div>
                </div> -->
                <div class="header-left">
                    <!-- <div class="input-group icons">
                        <div class="input-group-prepend">
                            <span class="input-group-text bg-transparent border-0 pr-2 pr-sm-3" id="basic-addon1"><i class="mdi mdi-magnify"></i></span>
                        </div>
                        <input type="search" class="form-control" placeholder="Search Dashboard" aria-label="Search Dashboard">
                        <div class="drop-down animated flipInX d-md-none">
                            <form action="#">
                                <input type="text" class="form-control" placeholder="Search">
                            </form>
                        </div>
                    </div> -->
                </div>
                <div class="header-right">
                    <ul class="clearfix">
                        
                        <li class="icons dropdown">
                            <div class="user-img c-pointer position-relative"   data-toggle="dropdown">
                                <span class="activity active"></span>
                                <img src="images/user/1.png" height="40" width="40" alt="">
                            </div>
                            <div class="drop-down dropdown-profile animated fadeIn dropdown-menu">
                                <div class="dropdown-content-body">
                                    <ul>
                                        <li>
                                            <a href="patient-profile.html"><i class="icon-user"></i> <span>Profile</span></a>
                                        </li>

                                        <li><a href="index.html"><i class="icon-key"></i> <span>Logout</span></a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!--**********************************
            Header end ti-comment-alt
        ***********************************-->

        <!--**********************************
            Sidebar start
        ***********************************-->
        <div class="nk-sidebar">           
            <div class="nk-nav-scroll">
                <ul class="metismenu" id="menu">
                    <li class="nav-label">Patient Dashboard</li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-grid menu-icon"></i><span class="nav-text">My Dashboard</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="./patient-dashboard.html">Home</a></li>
                            <!-- <li><a href="./index-2.html">Home 2</a></li> -->
                        </ul>
                    </li>

                    <li class="mega-menu mega-menu-sm">
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-user menu-icon"></i><span class="nav-text">Patient Profile</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="./patient-profile.html">My Profile</a></li>
                        </ul>
                    </li>

                    <li class="mega-menu mega-menu-sm">
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-note menu-icon"></i><span class="nav-text">Sleep Diary</span>
                        </a>
                        <ul aria-expanded="false" id="sleepLink">
                            <li><a href="./sleep-diary.html" style="display: none;"></a></li>
                            <li><a href="./sleep-diary.html" style="display: none;"></a></li>
                        </ul>
                    </li>

                    <li class="mega-menu mega-menu-sm">
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-speedometer menu-icon"></i><span class="nav-text">Sleep Clock</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="./patient-sleep-clock.html">My Sleep Clock</a></li>
                        </ul>
                    </li>

                    <li class="mega-menu mega-menu-sm">
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-graph menu-icon"></i><span class="nav-text">Sleep Report</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="./patient-sleep-report.html">My Sleep Report</a></li>
                        </ul>
                    </li>

                    <li class="mega-menu mega-menu-sm">
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-screen-tablet menu-icon"></i><span class="nav-text">Sleep Medication</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="./sleep-medication.html">My Sleep Medication</a></li>
                        </ul>
                    </li>

                    <li class="mega-menu mega-menu-sm">
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-notebook menu-icon"></i><span class="nav-text">Task & Progress</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="./task-list.html">My Task List</a></li>
                            <li><a href="./program-content.html">My Progress</a></li>
                        </ul>
                    </li>

                    <!-- <li class="mega-menu mega-menu-sm">
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-user menu-icon"></i><span class="nav-text">User Guide</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="./patient-profile.html">My User Guide</a></li>
                        </ul>
                    </li> -->

                    <li class="mega-menu mega-menu-sm">
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="icon-envelope menu-icon"></i><span class="nav-text">Contact Us</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="./voluntary-withdrawal.html">Voluntory Withdrawal</a></li>
                            <li><a href="./feedback.html">Feedback</a></li>
                        </ul>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <!--**********************************
            Sidebar end
        ***********************************-->

        <!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body">

            <div class="container-fluid mt-3">
                <div class="row">
                    <!-- <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">SLEEP DIARY</h4>
                                <h5 class="mt-3">Completed <span class="float-right">10%</span></h5>
                                <div class="progress" style="height: 9px">
                                    <div class="progress-bar bg-danger wow  progress-" style="width: 10%;" role="progressbar"><span class="sr-only">60% Complete</span>
                                    </div>
                                </div>
                                
                            </div>
                        </div>

                    </div> -->

                    <div class="justifyDiv">
                                    
                        <div class="bootstrap-modal">
                            
                            <!-- Modal -->
                            <div class="modal fade" id="exampleModalLevel2">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="modalTitle">Welcome to Level 2!</h5>
                                            <button type="button" class="close" data-dismiss="modal"><span>&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <p>In level 2 you will learn about a technique called sleep restriction.</p>
                                            <div>
                                                <h4 class="consentInfoHeadSmall">To advance to level 3 you will need to:</h4>
                                            </div>
                                            <div class="consentInfoBody">
                                                •	Complete “Introduction to Sleep Restriction”. This includes setting up your sleep clock. 
                                            </div>
                                            <div class="consentInfoBody">
                                                •	Complete at least 5 sleep diaries within a week.
                                            </div>
                                            <div class="consentInfoBody">
                                                •	Complete the self-assessment of current insomnia symptoms.
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">OK</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="card" id="one">
                            <div class="card-body">
                                <h4 class="card-title">Level 2 – Introduction to Sleep Restriction</h4>
                                <div class="justifyDiv">
                                    The main goal this week is to start using a strategy called <strong class="formatItalics">sleep restriction.</strong>  
                                </div>
                                <div class="justifyDiv">
                                    Sleep restriction involves changing the times you get into bed at night and get out of bed in the morning to make your sleep more efficient. The aim is to restrict the amount of time you spend lying in bed awake, not sleeping.
                                </div>
                                <div class="justifyDiv">
                                    You might think that the more time you spend in bed, the more likely you will be to get a good night’s sleep. This is not the case. If you spend a lot of time lying awake at night you will begin to associate the bed with being awake. Your bed should be a place for sleep. 
                                </div>


                                <div>
                                    <h4 class="consentInfoHeadSmall">Some things you can do to associate your bed with sleep:</h4>
                                </div>
                                <div class="consentInfoBody">
                                    •	Try using your bed only for sleeping (and sex). Get into bed only when you feel sleepy.
                                </div>
                                <div class="consentInfoBody">
                                    •	Avoid reading, watching TV, or using screens (phone, computer, etc.) while in bed. 
                                </div>
                                <div class="consentInfoBody">
                                    •	If you don’t fall asleep within 20 minutes, get out of bed and do something else. Go back to bed only when you feel tired. 
                                </div>


                                <div>
                                    <h4 class="consentInfoHeadSmall">The first step is to look at your current sleep patterns. Based on your last 7 sleep diaries:</h4>
                                </div>
                                <div class="consentInfoBody">
                                    •	You spent an average of <strong id="contAvInBed"></strong> hours in bed per night. 
                                </div>
                                <div class="consentInfoBody">
                                    •	You were asleep for an average of <strong id="contAvAsleep"></strong> hours per night.
                                </div>

                                <div class="justifyDiv">
                                    This means that your average sleep efficiency was <strong id="contAvAsleepEff"></strong>.
                                </div>
                                <div class="justifyDiv">
                                   <strong>Sleep efficiency</strong> is the ratio of time in bed that is spent asleep.
                                </div>
                                <div class="justifyDiv">
                                    The goal this week is to use the information from your sleep diaries to build a plan that will improve your sleep efficiency. 
                                </div>
                                <div class="justifyDiv">
                                    The next step is to choose a sleep window for the next week.  
                                </div>

                                <input type='button' class='buttonPlainTxt' id="btnContNextStep" onclick="hideDisplay('one', 'two');" value='Next Step'/>
                                
                            </div>
                        </div>

                        <div class="hidden" id="two">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">Your Next Step</h4>
                                    <div class="justifyDiv">
                                        Starting this week, use the sleep clock to establish a consistent bed time and rise time for yourself. This means going to bed and getting out of bed at the same time every day – including weekends. It might be tempting to change your sleep patterns on the weekend, but this habit may be making your sleep problems worse. Going to bed and getting up at the same time everyday helps make it easier to feel sleepy when it is time to sleep. 
                                    </div>
                                    <div>
                                        <h4 class="consentInfoHeadSmall">Select your rise time:</h4>
                                    </div>
                                    <div class="justifyDiv">
                                        Pick a rise time you can maintain for the next 7 days. It needs to be a time that will work for you and allow you to start your daily activities on time.
                                    </div>
    
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label class="m-t-20 sleepMargin">Your Rise Time:</label>
                                            <div class="input-group clockpicker">
                                                <input type="text" class="form-control" id="clockRiseTime" value="09:30"> <span class="input-group-append"><span class="input-group-text"><i class="fa fa-clock-o"></i></span></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="justifyDiv">
                                        <input type='button' class='buttonPlainTxt' onclick="hideDisplay('two', 'one');" value='Back'/>
                                        <input type='button' class='buttonPlainTxt' id="btnContRiseTime" onclick="calculateBedTime('two', 'three');" value='Submit Your Rise Time'/>
                                    </div>

                                </div>
                            </div>
                        </div>


                        <div class="hidden" id="three">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">Set Your Sleep Window</h4>
                                    <div class="justifyDiv">
                                        Based on your last 7 sleep diaries, you slept an average of <strong id="contSleepWindowAv"></strong> hours per night. 
                                    </div>

                                    <div id="less5" class="justifyDiv hidden">
                                        For the next week, your target will be to get 5 hours of sleep per night.
                                    </div>

                                    <div id="more5" class="justifyDiv hidden">
                                        For the next week this will be the length of your sleep window.
                                    </div>

                                    <div class="justifyDiv">
                                        Based on the rise time you selected, here is your new bed time and rise time for the next week. Please do your best to stick to this schedule. 
                                    </div>
                                    <div>
                                        <label class="consentInfoBody">Your Bed Time (In 24 Hours):</label>
                                        <label class="consentInfoBody" id="contYBedTime"></label>
                                    </div>
                                    
                                    <div>
                                        <label class="consentInfoBody">Your Rise Time (In 24 Hours):</label>
                                        <label class="consentInfoBody" id="contYRiseTime"></label>
                                    </div>
    
                                    <div class="justifyDiv">
                                        <input type='button' class='buttonPlainTxt' onclick="hideDisplay('three', 'two');" value='Go Back to Select Different Rise Time'/>
                                    </div>

                                    <div class="justifyDiv">
                                        This app can be used to set alarms on your phone to remind you when it is time to get ready for bed and get up in the morning.
                                    </div>

                                    <div class="justifyDiv">
                                        <input type='button' class='buttonPlainTxt' onclick="hideDisplay('three', 'four');" value='Next'/>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <div class="hidden" id="four">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">Improving Sleep Efficiency</h4>

                                    <div class="justifyDiv">
                                        An important part of this therapy involves maintaining consistent bed times and rise times. Please do your best to maintain this for the next week. Your sleep window will be adjusted as you progress through the program and as your sleep efficiency increases. 
                                    </div>

                                    <div class="justifyDiv">
                                        You might feel like your new bed time is much later than you would normally go to bed. It might seem extremely late to you. This is normal. The goal is to limit your time in bed to the time you spend sleeping. Rather than spending a lot of time in bed awake before falling asleep, now you will go to bed later when you are more likely to feel sleepy.
                                    </div>

                                    <div class="justifyDiv">
                                        Sleep restriction can be difficult at first. You may have a few nights with only a few hours of sleep. When this happens many people try to compensate by sleeping in later or taking a nap during the day. <strong>Don’t do this</strong> – stick to the schedule! The restricted sleep schedule is designed to increase your <strong>sleep drive</strong>. This means that it will be easier to fall asleep as you train your body to expect sleep at the same time every day. 
                                    </div>

                                    <div class="justifyDiv">
                                        <strong class="formatItalics">Sleep efficiency</strong> describes how much of the time you spend in bed is actually spent sleeping.
                                    </div>

                                    <div class="justifyDiv">
                                        Based on the sleep diaries you completed over the past week, your average sleep efficiency is <strong id="contSpEff"></strong>. Ideally, sleep efficiency should be around 85-90%. 
                                    </div>

                                    <div class="sleepDiv" id="spEffReport">
                                        <a href="#" class="txt1">
                                            <strong>Sleep efficiency report for the last week</strong>
                                        </a>
                                    </div>

                                    <div class="justifyDiv">
                                        Each week your sleep window will be adjusted based on how efficient your sleep was over the past week.
                                    </div>
                                    <div class="justifyDiv">
                                        Sleep efficiency less than 85% means there is room for improvement. To increase sleep efficiency, your sleep window will be reduced by moving your bed time 15 minutes later. 
                                    </div>
                                    <div class="justifyDiv">
                                        Sleep efficiency between 85%-89% means you are right on track. With scores like this your sleep window should stay the same. 
                                    </div>
                                    <div class="justifyDiv">
                                        Sleep efficiency between 90%-94% is a great result. At this point, you can extend your sleep window by moving your bed time 15 minutes earlier. 
                                    </div>
                                    <div class="justifyDiv">
                                        If your sleep efficiency is consistently over 95%, it might be too high. This can sometimes mean that you are not getting enough sleep. With a result like this, your sleep window will be increased by 30 minutes.
                                    </div>

                                    <div>
                                        <h4 class="consentInfoHeadSmall">Things to do this week:</h4>
                                    </div>
                                    <div class="consentInfoBody">
                                        •	Track your sleep and medication use each day. 
                                    </div>
                                    <div class="consentInfoBody">
                                        •	Follow your sleep clock. Set alarms to remind you when it is time to get ready for bed and get up each morning. 
                                    </div>
                                    <div class="consentInfoBody">
                                        •	Complete the self-assessment of your current insomnia symptoms. 
                                    </div>

                                    <div class="justifyDiv">
                                        <input type='button' class='buttonPlainTxt'  onclick="hideDisplay('four', 'three');" value='Back'/>
                                        <input type='button' class='buttonPlainTxt' id="btnSubmitLV2"  value='Click To Conclude Level 2'/>
                                    </div>

                                    <div class="sleepDiv">
                                        <a href="program-content.html" class="txt1">
                                            <strong>Return to Dashboard</strong>
                                        </a>
                                    </div>

                                </div>
                            </div>
                        </div>
                        

                    </div>


                </div>

               
                    
            </div>
            <!-- #/ container -->
        </div>
        <!--**********************************
            Content body end
        ***********************************-->
        
        
        <!--**********************************
            Footer start
        ***********************************-->
        <div class="footer">
            <div class="copyright">
                <p>Copyright &copy; Designed & Developed by <a href="https://themeforest.net/user/quixlab">Health enSuite Research Team</a> 2020</p>
            </div>
        </div>
        <!--**********************************
            Footer end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <script src="plugins/common/common.min.js"></script>
    <script src="js/custom.min.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/gleek.js"></script>
    <script src="js/styleSwitcher.js"></script>

    <script src="./plugins/moment/moment.js"></script>
    <script src="./plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js"></script>
    <!-- Clock Plugin JavaScript -->
    <script src="./plugins/clockpicker/dist/jquery-clockpicker.min.js"></script>
    <!-- Color Picker Plugin JavaScript -->
    <script src="./plugins/jquery-asColorPicker-master/libs/jquery-asColor.js"></script>
    <script src="./plugins/jquery-asColorPicker-master/libs/jquery-asGradient.js"></script>
    <script src="./plugins/jquery-asColorPicker-master/dist/jquery-asColorPicker.min.js"></script>
    <!-- Date Picker Plugin JavaScript -->
    <script src="./plugins/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
    <!-- Date range Plugin JavaScript -->
    <script src="./plugins/timepicker/bootstrap-timepicker.min.js"></script>
    <script src="./plugins/bootstrap-daterangepicker/daterangepicker.js"></script>

    <script src="./js/plugins-init/form-pickers-init.js"></script>
    <script src="./js/plugins-init/form-pickers-init.js"></script>

    <script src="js/levelsAPI.js"></script>
    <script src="js/MoreFunction.js"></script>
    <script src="js/sleepDairyInit.js"></script>
    <script src="./plugins/sweetalert/js/sweetalert.min.js"></script>

</body>

</html>